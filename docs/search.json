[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Ruoqi Li",
    "section": "",
    "text": "Welcome to my website!"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this site"
  },
  {
    "objectID": "resume.html",
    "href": "resume.html",
    "title": "My Resume",
    "section": "",
    "text": "Download PDF file."
  },
  {
    "objectID": "projects.html",
    "href": "projects.html",
    "title": "My Projects",
    "section": "",
    "text": "A Replication of Karlan and List (2007)\n\n\n\n\n\n\nRuoqi Li\n\n\nApr 23, 2025\n\n\n\n\n\n\n\n\n\n\n\nAnalysis of Cars\n\n\n\n\n\n\nYour Name\n\n\nApr 23, 2025\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "projects/project1/index.html",
    "href": "projects/project1/index.html",
    "title": "Analysis of Cars",
    "section": "",
    "text": "Let’s investigate the relationship between fuel efficiency (mpg) and engine displacement (disp) from the mtcars dataset. Those variables have a correlation of -0.85.\n\n\nHere is a plot:\n\nlibrary(tidyverse)\ndata(mtcars)\nmtcars |&gt;\n  ggplot(aes(mpg, disp)) + \n  geom_point(color=\"dodgerblue4\", size=2)"
  },
  {
    "objectID": "projects/project1/index.html#sub-header",
    "href": "projects/project1/index.html#sub-header",
    "title": "Analysis of Cars",
    "section": "",
    "text": "Here is a plot:\n\nlibrary(tidyverse)\ndata(mtcars)\nmtcars |&gt;\n  ggplot(aes(mpg, disp)) + \n  geom_point(color=\"dodgerblue4\", size=2)"
  },
  {
    "objectID": "projects/project2/index.html",
    "href": "projects/project2/index.html",
    "title": "A Replication of Karlan and List (2007)",
    "section": "",
    "text": "Dean Karlan at Yale and John List at the University of Chicago conducted a field experiment to test the effectiveness of different fundraising letters. They sent out 50,000 fundraising letters to potential donors, randomly assigning each letter to one of three treatments: a standard letter, a matching grant letter, or a challenge grant letter.\nEach recipient was randomly assigned to receive one of the following treatments:\n\nA standard solicitation letter (control group)\nA letter including a matching donation offer (treatment group)\nVariations within the matching group that differed by:\n\nMatch ratio (1:1, 2:1, or 3:1)\nMaximum match amount ($25k, $50k, $100k, or unstated)\nSuggested donation level (e.g., base amount, 1.25x, or 1.5x of prior donation)\n\n\nThe matching grant was framed as coming from a “concerned fellow member” who would match donations received up to a certain amount, providing a perceived multiplier effect to the recipient’s contribution.\nThis design allowed the authors to explore not only the overall impact of offering a match on donation rates and amounts, but also to test whether the size of the match ratio or the suggested donation amount affected donor behavior.\nThey published the results of this experiment in the American Economic Review in 2007. The article and supporting data are available from the AEA website and from Innovations for Poverty Action as part of Harvard’s Dataverse.\nThis project seeks to replicate their results."
  },
  {
    "objectID": "projects/project2/index.html#introduction",
    "href": "projects/project2/index.html#introduction",
    "title": "A Replication of Karlan and List (2007)",
    "section": "",
    "text": "Dean Karlan at Yale and John List at the University of Chicago conducted a field experiment to test the effectiveness of different fundraising letters. They sent out 50,000 fundraising letters to potential donors, randomly assigning each letter to one of three treatments: a standard letter, a matching grant letter, or a challenge grant letter.\nEach recipient was randomly assigned to receive one of the following treatments:\n\nA standard solicitation letter (control group)\nA letter including a matching donation offer (treatment group)\nVariations within the matching group that differed by:\n\nMatch ratio (1:1, 2:1, or 3:1)\nMaximum match amount ($25k, $50k, $100k, or unstated)\nSuggested donation level (e.g., base amount, 1.25x, or 1.5x of prior donation)\n\n\nThe matching grant was framed as coming from a “concerned fellow member” who would match donations received up to a certain amount, providing a perceived multiplier effect to the recipient’s contribution.\nThis design allowed the authors to explore not only the overall impact of offering a match on donation rates and amounts, but also to test whether the size of the match ratio or the suggested donation amount affected donor behavior.\nThey published the results of this experiment in the American Economic Review in 2007. The article and supporting data are available from the AEA website and from Innovations for Poverty Action as part of Harvard’s Dataverse.\nThis project seeks to replicate their results."
  },
  {
    "objectID": "projects/project2/index.html#data",
    "href": "projects/project2/index.html#data",
    "title": "A Replication of Karlan and List (2007)",
    "section": "Data",
    "text": "Data\n\nDescription\n\n\n\n\n\n\nVariable Definitions\n\n\n\n\n\n\n\n\n\n\n\n\nVariable\nDescription\n\n\n\n\ntreatment\nTreatment\n\n\ncontrol\nControl\n\n\nratio\nMatch ratio\n\n\nratio2\n2:1 match ratio\n\n\nratio3\n3:1 match ratio\n\n\nsize\nMatch threshold\n\n\nsize25\n$25,000 match threshold\n\n\nsize50\n$50,000 match threshold\n\n\nsize100\n$100,000 match threshold\n\n\nsizeno\nUnstated match threshold\n\n\nask\nSuggested donation amount\n\n\naskd1\nSuggested donation was highest previous contribution\n\n\naskd2\nSuggested donation was 1.25 x highest previous contribution\n\n\naskd3\nSuggested donation was 1.50 x highest previous contribution\n\n\nask1\nHighest previous contribution (for suggestion)\n\n\nask2\n1.25 x highest previous contribution (for suggestion)\n\n\nask3\n1.50 x highest previous contribution (for suggestion)\n\n\namount\nDollars given\n\n\ngave\nGave anything\n\n\namountchange\nChange in amount given\n\n\nhpa\nHighest previous contribution\n\n\nltmedmra\nSmall prior donor: last gift was less than median $35\n\n\nfreq\nNumber of prior donations\n\n\nyears\nNumber of years since initial donation\n\n\nyear5\nAt least 5 years since initial donation\n\n\nmrm2\nNumber of months since last donation\n\n\ndormant\nAlready donated in 2005\n\n\nfemale\nFemale\n\n\ncouple\nCouple\n\n\nstate50one\nState tag: 1 for one observation of each of 50 states; 0 otherwise\n\n\nnonlit\nNonlitigation\n\n\ncases\nCourt cases from state in 2004-5 in which organization was involved\n\n\nstatecnt\nPercent of sample from state\n\n\nstateresponse\nProportion of sample from the state who gave\n\n\nstateresponset\nProportion of treated sample from the state who gave\n\n\nstateresponsec\nProportion of control sample from the state who gave\n\n\nstateresponsetminc\nstateresponset - stateresponsec\n\n\nperbush\nState vote share for Bush\n\n\nclose25\nState vote share for Bush between 47.5% and 52.5%\n\n\nred0\nRed state\n\n\nblue0\nBlue state\n\n\nredcty\nRed county\n\n\nbluecty\nBlue county\n\n\npwhite\nProportion white within zip code\n\n\npblack\nProportion black within zip code\n\n\npage18_39\nProportion age 18-39 within zip code\n\n\nave_hh_sz\nAverage household size within zip code\n\n\nmedian_hhincome\nMedian household income within zip code\n\n\npowner\nProportion house owner within zip code\n\n\npsch_atlstba\nProportion who finished college within zip code\n\n\npop_propurban\nProportion of population urban within zip code\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ntreatment\ncontrol\nratio\nratio2\nratio3\nsize\nsize25\nsize50\nsize100\nsizeno\n...\nredcty\nbluecty\npwhite\npblack\npage18_39\nave_hh_sz\nmedian_hhincome\npowner\npsch_atlstba\npop_propurban\n\n\n\n\n0\n0\n1\nControl\n0\n0\nControl\n0\n0\n0\n0\n...\n0.0\n1.0\n0.446493\n0.527769\n0.317591\n2.10\n28517.0\n0.499807\n0.324528\n1.0\n\n\n1\n0\n1\nControl\n0\n0\nControl\n0\n0\n0\n0\n...\n1.0\n0.0\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n2\n1\n0\n1\n0\n0\n$100,000\n0\n0\n1\n0\n...\n0.0\n1.0\n0.935706\n0.011948\n0.276128\n2.48\n51175.0\n0.721941\n0.192668\n1.0\n\n\n3\n1\n0\n1\n0\n0\nUnstated\n0\n0\n0\n1\n...\n1.0\n0.0\n0.888331\n0.010760\n0.279412\n2.65\n79269.0\n0.920431\n0.412142\n1.0\n\n\n4\n1\n0\n1\n0\n0\n$50,000\n0\n1\n0\n0\n...\n0.0\n1.0\n0.759014\n0.127421\n0.442389\n1.85\n40908.0\n0.416072\n0.439965\n1.0\n\n\n\n\n5 rows × 51 columns\n\n\n\n\n\nBalance Test\nAs an ad hoc test of the randomization mechanism, I provide a series of tests that compare aspects of the treatment and control groups to assess whether they are statistically significantly different from one another.\n\n1. mrm2 (Months Since Last Donation)\nWe first test whether the treatment and control groups differ significantly in the number of months since their last donation (mrm2). This helps verify whether the randomization process created balanced groups.\n\n\n(0.0764041463527638, 0.9390978830677066)\n\n\n\nThe t-test returns a t-statistic of 0.076 and a p-value of 0.939, indicating no statistically significant difference in the mrm2 variable between the two groups.\n\nWe also run a regression of mrm2 ~ treatment to confirm the result:\n\nreg_model = smf.ols('mrm2 ~ treatment', data=df_clean).fit()\nreg_model.params.to_frame(\"coef\").join(reg_model.pvalues.to_frame(\"p-value\"))\n\n\n\n\n\n\n\n\ncoef\np-value\n\n\n\n\nIntercept\n12.984577\n0.000000\n\n\ntreatment\n0.008835\n0.939098\n\n\n\n\n\n\n\n\nThe estimated coefficient on treatment is 0.0088 with a p-value of 0.939, again showing no meaningful difference.\n\n\n\nSummary statistics:\n\n\n\n\n\n\n\n\n\nmean\nstd\ncount\n\n\ntreatment\n\n\n\n\n\n\n\n0\n12.984577\n12.065892\n16339\n\n\n1\n12.993411\n12.064867\n32632\n\n\n\n\n\n\n\nThe table above shows the average number of months since the last donation (mrm2) for each group:\n\nControl group (treatment = 0): 12.98 months\nTreatment group (treatment = 1): 12.99 months\n\nThe means are nearly identical, differing by only 0.0088 months.\nThis minimal difference provides strong visual evidence that the groups are balanced on this pre-treatment variable.\n\n\nSummary Interpretation:\n\nT-test result: t = 0.076, p = 0.939 → No significant difference\nRegression: treatment coefficient is 0.0088, also not significant\nConclusion: There is no statistical evidence of a difference in the time since last donation between the treatment and control groups.\n\n\n\n2. years (Years Since First Donation)\nWe now test whether the treatment and control groups differ significantly in the number of years since the individual first donated (years). This variable serves as a proxy for donor loyalty and tenure.\n\n\n(-1.1939644099545728, 0.23249767383190834)\n\n\n\nThe t-test returns a t-statistic of -1.194 and a p-value of 0.232, indicating no statistically significant difference in the years variable between the treatment and control groups. This suggests that both groups had similar donation histories prior to the experiment.\n\nWe also run a regression of years ~ treatment to confirm the result:\n\nreg_model = smf.ols('years ~ treatment', data=df_clean).fit()\nreg_model.params.to_frame(\"coef\").join(reg_model.pvalues.to_frame(\"p-value\"))\n\n\n\n\n\n\n\n\ncoef\np-value\n\n\n\n\nIntercept\n6.140645\n0.000000\n\n\ntreatment\n-0.063114\n0.232498\n\n\n\n\n\n\n\n\nThe estimated coefficient on treatment is -0.0631 with a p-value of 0.232, again showing no meaningful difference.\n\nThese results support the conclusion that the randomization procedure successfully balanced the groups in terms of how long individuals had been donating to the organization.\n\n\n\n\n\n\n\n\n\nmean\nstd\ncount\n\n\ntreatment\n\n\n\n\n\n\n\n0\n6.140645\n5.636459\n16339\n\n\n1\n6.077531\n5.454186\n32632\n\n\n\n\n\n\n\nThe table above shows the average number of years since the first donation (years) for each group:\n\nControl group (treatment = 0): 6.14 years\nTreatment group (treatment = 1): 6.08 years\n\nThe means are nearly identical, differing by only 0.0631 years (approximately 23 days).\nThis minimal difference provides strong visual evidence that the groups are balanced on this pre-treatment variable, reinforcing the validity of the random assignment.\n\n\nSummary Interpretation:\n\nT-test result: t = -1.194, p = 0.232 → No significant difference\nRegression: treatment coefficient = -0.0631, also not significant\nConclusion: There is no statistical evidence of a difference in donor tenure between the treatment and control groups.\n\nThese results confirm that the groups are balanced in terms of donor tenure.\nThe near-identical averages and the lack of statistically significant difference indicate that the treatment assignment did not disrupt the pre-existing characteristics of the sample.\nThis supports the internal validity of the experimental design.\n\n\n3. freq (Number of Prior Donations)\nWe now test whether the treatment and control groups are balanced in terms of their prior donation frequency (freq). This variable captures how often individuals have previously given and reflects general giving propensity.\n\n\n(-0.059722457211553545, 0.9523769290955975)\n\n\n\nThe t-test returns a t-statistic of -0.060 and a p-value of 0.952, indicating no statistically significant difference in the freq variable between the treatment and control groups.\n\nWe also run a regression of freq ~ treatment to confirm the result:\n\nreg_model = smf.ols('freq ~ treatment', data=df_clean).fit()\nreg_model.params.to_frame(\"coef\").join(reg_model.pvalues.to_frame(\"p-value\"))\n\n\n\n\n\n\n\n\ncoef\np-value\n\n\n\n\nIntercept\n8.068119\n0.000000\n\n\ntreatment\n-0.006554\n0.952377\n\n\n\n\n\n\n\n\nThe estimated coefficient on treatment is -0.0066 with a p-value of 0.952, again showing no meaningful difference.\n\n\n\n\n\n\n\n\n\n\nmean\nstd\ncount\n\n\ntreatment\n\n\n\n\n\n\n\n0\n8.068119\n11.449873\n16339\n\n\n1\n8.061565\n11.450896\n32632\n\n\n\n\n\n\n\nThe table above shows the average number of prior donations (freq) for each group:\n\nControl group (treatment = 0): 8.07 donations\nTreatment group (treatment = 1): 8.06 donations\n\nThe means are nearly identical, differing by only 0.0066 donations.\nThis minimal difference provides strong visual and statistical evidence that the groups are balanced on this pre-treatment variable.\n\n\nSummary Interpretation:\n\nT-test result: t = -0.060, p = 0.952 → No significant difference\nRegression: treatment coefficient = -0.0066, p = 0.952 → also not significant\nConclusion: There is no statistical evidence of a difference in prior donation frequency between the groups."
  },
  {
    "objectID": "projects/project2/index.html#experimental-results",
    "href": "projects/project2/index.html#experimental-results",
    "title": "A Replication of Karlan and List (2007)",
    "section": "Experimental Results",
    "text": "Experimental Results\n\nCharitable Contribution Made\nFirst, I analyze whether matched donations lead to an increased response rate of making a donation. And begin by examining whether the treatment group (those who received a matching donation offer) had a higher probability of making a charitable contribution (gave = 1) than the control group.\n\n\n\n\n\n\n\n\n\ntreatment\ngave\n\n\n\n\n0\nControl\n0.017858\n\n\n1\nTreatment\n0.022039\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nThe bar plot shows a higher donation rate in the treatment group compared to the control group.\nThis suggests a potential positive effect of matching donations on participation in giving.\n\nI also conduct a t-test to assess whether the difference in donation rates is statistically significant.\n\n\n(3.1013610005439456, 0.0019274025949016982)\n\n\n\nThe t-test returns a t-statistic of 3.10 and a p-value of 0.0019, indicating a statistically significant difference between the groups.\nThis result suggests that the matching donation treatment had a positive effect on the likelihood of giving.\n\nTo further investigate the effect of the matching donation offer on donation behavior, we run a simple linear regression where the dependent variable is gave (1 if donated, 0 if not) and the independent variable is treatment (1 = received match offer, 0 = control).\n\nols_model = smf.ols('gave ~ treatment', data=df_contribution).fit()\nols_model.params.to_frame(\"coef\").join(ols_model.pvalues.to_frame(\"p-value\"))\n\n\n\n\n\n\n\n\ncoef\np-value\n\n\n\n\nIntercept\n0.017858\n4.779032e-59\n\n\ntreatment\n0.004180\n1.927403e-03\n\n\n\n\n\n\n\n\nThe OLS regression estimates that the coefficient on treatment is 0.0042, with a p-value of 0.002.\nThis means that being in the treatment group increased the probability of donation by about 0.42 percentage points, and this effect is statistically significant.\n\nThis result is consistent with the earlier t-test, which also showed a significant difference between groups.\nTo more accurately model the binary outcome variable (gave), we also estimate a Probit regression. This approach accounts for the 0/1 nature of the dependent variable and models the probability that an individual donates.\n\nprobit_model = smf.probit('gave ~ treatment', data=df_contribution).fit()\nprobit_model.params.to_frame(\"coef\").join(probit_model.pvalues.to_frame(\"p-value\"))\n\nOptimization terminated successfully.\n         Current function value: 0.100443\n         Iterations 7\n\n\n\n\n\n\n\n\n\ncoef\np-value\n\n\n\n\nIntercept\n-2.100141\n0.000000\n\n\ntreatment\n0.086785\n0.001852\n\n\n\n\n\n\n\n\nThe estimated coefficient on treatment is 0.0868, with a p-value of 0.002.\nThis indicates that being assigned to the treatment group significantly increases the probability of donating.\n\nAlthough the Probit coefficient is not directly interpretable as a marginal effect (like in OLS), the positive sign and low p-value confirm that the treatment effect is positive and statistically significant.\n\nSummary: Charitable Contribution Made\nIn this section, I analyzed whether offering a matching donation increases the likelihood that individuals donate.\n\nI first compared donation rates between the treatment and control groups using a bar plot. The visual comparison showed a modest increase in the treatment group.\nA t-test confirmed that this difference is statistically significant (t = 3.10, p = 0.0019), suggesting that the treatment effect is not due to random chance.\nI then estimated an OLS regression of gave ~ treatment, which indicated that being in the treatment group increased donation probability by approximately 0.42 percentage points—a meaningful and significant effect.\nFinally, I fit a Probit regression to better model the binary outcome variable. The coefficient on treatment was positive and statistically significant (0.087, p = 0.002), further confirming the effect.\n\nTogether, these results provide strong evidence that matching donation offers increase the probability of giving.\nNOTE: Linear regression results appear replicate Table 3 column 1 in the paper. Probit results do not, despite Table 3 indicating its results come from probit regressions…\n\n\n\nDifferences between Match Rates\nNext, I assess the effectiveness of different sizes of matched donations on the response rate. To test whether higher match ratios (2:1 and 3:1) are more effective than the baseline 1:1 ratio at encouraging charitable contributions.\n\n\n(Ttest_indResult(statistic=0.96504713432247, pvalue=0.33453168549723933),\n Ttest_indResult(statistic=0.05011583793874515, pvalue=0.9600305283739325))\n\n\nThe two-sample t-tests show:\n\n2:1 vs 1:1: t = 0.965, p = 0.335 → not significant\n3:1 vs 2:1: t = 0.050, p = 0.960 → not significant\n\nThese results indicate that there is no statistically significant difference in donation rates between the 1:1 and 2:1 match groups, or between the 2:1 and 3:1 match groups.\n\n\nratio\n1    0.020749\n2    0.022633\n3    0.022733\nName: gave, dtype: float64\n\n\nThe table below shows the average donation rate (gave) by match ratio:\n\n1:1 → 2.07%\n2:1 → 2.26%\n3:1 → 2.27%\n\nWhile donation rates increase slightly as the match ratio rises, the differences are minimal and may not be practically or statistically meaningful.\n\nreg_model_categorical = smf.ols('gave ~ C(ratio)', data=df_match).fit()\nreg_model_categorical.params.to_frame(\"coef\").join(reg_model_categorical.pvalues.to_frame(\"p-value\"))\n\n\n\n\n\n\n\n\ncoef\np-value\n\n\n\n\nIntercept\n0.020749\n3.981333e-50\n\n\nC(ratio)[T.2]\n0.001884\n3.382805e-01\n\n\nC(ratio)[T.3]\n0.001984\n3.133172e-01\n\n\n\n\n\n\n\n\nWe regress gave on the categorical variable ratio, treating 1:1 as the baseline:\n\n\n\nThe intercept (0.0207) represents the donation rate for the 1:1 match group (2.07%)\nThe coefficient on 2:1 is 0.0019 (p = 0.338), indicating a small and not statistically significant increase over the 1:1 group\nThe coefficient on 3:1 is effectively 0 (p = 0.313), indicating no difference compared to the 2:1 group\n\n\nOverall, the regression confirms the t-test findings: higher match ratios do not significantly increase the probability of donation.\n\n\nSize of Charitable Contribution\nIn this subsection, I analyze the effect of the size of matched donation on the size of the charitable contribution.\n\n\nSize of Charitable Contribution\nIn this section, we examine whether the matching donation treatment affects not only the likelihood of donating, but also the amount donated.\n\n\n1. Analysis on All Observations\nI begin by analyzing the donation amount for the entire sample, including individuals who did not donate (whose amount = 0).\n\n\n(1.860501983704084, 0.06282039496922609)\n\n\n\nThe t-test yields t = 1.86 and p = 0.063, suggesting a marginally non-significant difference.\n\n\nreg_all = smf.ols('amount ~ treatment', data=df_amount).fit()\nreg_all.params.to_frame(\"coef\").join(reg_all.pvalues.to_frame(\"p-value\"))\n\n\n\n\n\n\n\n\ncoef\np-value\n\n\n\n\nIntercept\n0.813268\n1.843438e-33\n\n\ntreatment\n0.153605\n6.282029e-02\n\n\n\n\n\n\n\n\nThe regression estimates a treatment effect of $0.15, with a p-value of 0.063.\nThis suggests that receiving a matching offer slightly increases the average donation, but the effect is not statistically significant at the 5% level.\n\n\n\n\n2. Analysis Conditional on Giving\nNext, I restrict the sample to only those who donated (gave == 1) and repeat the analysis.\n\n\n(-0.5808388621715499, 0.5614758777919849)\n\n\n\nAmong donors only, the t-test show a t-statistic of -0.581 and a p-value of 0.561, indicating no statistically significant difference in the donation amounts between the treatment and control groups.\n\n\nreg_pos = smf.ols('amount ~ treatment', data=df_positive).fit()\nreg_pos.params.to_frame(\"coef\").join(reg_pos.pvalues.to_frame(\"p-value\"))\n\n\n\n\n\n\n\n\ncoef\np-value\n\n\n\n\nIntercept\n45.540268\n5.473578e-68\n\n\ntreatment\n-1.668393\n5.614756e-01\n\n\n\n\n\n\n\n\nThe regression shows that treatment group donors gave $1.67 less on average than control group donors, but this difference is not statistically significant.\n\n\n\n\n3. Visualization: Donation Amount Distribution\nI now visualize the donation amounts among those who gave, using histograms for the control and treatment groups.\n\n\n\n\n\n\n\n\n\n\nThe control group’s average donation is around $45.54, while the treatment group’s average is $43.87. Visually, the difference is minimal and statistically insignificant.\n\n\nConclusion:\nThere is no strong evidence that receiving a matching donation offer affects the amount given.\nWhile the treatment may slightly increase overall donation amounts in the full sample, it does not lead to significantly larger gifts among those who do donate."
  },
  {
    "objectID": "projects/project2/index.html#simulation-experiment",
    "href": "projects/project2/index.html#simulation-experiment",
    "title": "A Replication of Karlan and List (2007)",
    "section": "Simulation Experiment",
    "text": "Simulation Experiment\nAs a reminder of how the t-statistic “works,” in this section I use simulation to demonstrate the Law of Large Numbers and the Central Limit Theorem.\nSuppose the true distribution of respondents who do not get a charitable donation match is Bernoulli with probability p=0.018 that a donation is made.\nFurther suppose that the true distribution of respondents who do get a charitable donation match of any size is Bernoulli with probability p=0.022 that a donation is made.\n\nLaw of Large Numbers\nThis simulation illustrates the concept of sampling error—the difference between the sample average and the true population average due to random variation in finite samples.\nBy simulating 10,000 donation outcomes from both the control (p = 0.018) and treatment (p = 0.022) groups, we compute the difference between each pair of observations.\nI plot the cumulative average of these differences as the number of samples increases.\n\nimport numpy as np\n\n# Simulation parameters\np_control = 0.018\np_treatment = 0.022\nn_sim = 10000\n\n# Law of Large Numbers\ncontrol_draws = np.random.binomial(1, p_control, n_sim)\ntreatment_draws = np.random.binomial(1, p_treatment, n_sim)\ndiffs = treatment_draws - control_draws\ncumulative_avg = np.cumsum(diffs) / np.arange(1, n_sim + 1)\n\n# Plot cumulative average\nplt.figure(figsize=(10, 5))\nplt.plot(cumulative_avg, label='Cumulative Average')\nplt.axhline(y=p_treatment - p_control, color='red', linestyle='--', label='True Treatment Effect (0.004)')\nplt.title('Law of Large Numbers: Cumulative Average of Differences')\nplt.xlabel('Number of Simulations')\nplt.ylabel('Cumulative Average Difference')\nplt.legend()\nplt.grid(True)\nplt.tight_layout()\nplt.show()\n\n\n\n\n\n\n\n\n\nThe plot shows that the cumulative average difference between treatment and control groups initially fluctuates but gradually stabilizes around 0.004, the true treatment effect.\nThis demonstrates the Law of Large Numbers: as sample size increases, the sample average converges to the population average.\n\n\n\nCentral Limit Theorem (CLT)\nTo illustrate the Central Limit Theorem, I simulate 1,000 average donation differences between treatment and control groups at different sample sizes: 50, 200, 500, and 1000. The goal is to demonstrate how the sampling distribution of the mean becomes more normal and more concentrated as sample size increases.\nIn this simulation, I repeat the following process 1,000 times for each sample size:\n\nDraw n binary donation outcomes from the control group (p = 0.018)\nDraw n binary donation outcomes from the treatment group (p = 0.022)\nCompute the mean difference between the two samples\nStore and plot the distribution of these mean differences\n\n\nsample_sizes = [50, 200, 500, 1000]\nfig, axes = plt.subplots(2, 2, figsize=(12, 10))\naxes = axes.flatten()\n\nfor i, size in enumerate(sample_sizes):\n    mean_diffs = []\n    for _ in range(1000):\n        control_sample = np.random.binomial(1, p_control, size)\n        treatment_sample = np.random.binomial(1, p_treatment, size)\n        diff = np.mean(treatment_sample) - np.mean(control_sample)\n        mean_diffs.append(diff)\n    axes[i].hist(mean_diffs, edgecolor='black')\n    axes[i].axvline(x=p_treatment - p_control, color='red', linestyle='--', label='True Effect (0.004)')\n    axes[i].set_title(f'Sample Size = {size}')\n    axes[i].set_xlabel('Mean Difference')\n    axes[i].set_ylabel('Frequency')\n    axes[i].legend()\n    axes[i].grid(True)\n\nplt.suptitle('Central Limit Theorem: Sampling Distributions of Mean Differences')\nplt.tight_layout(rect=[0, 0.03, 1, 0.95])\nplt.show()\n\n\n\n\n\n\n\n\n\nAs the sample size increases, the distribution of mean differences becomes: - More symmetric - More tightly centered - Closer to a bell-shaped (normal) distribution\nThis is a visual demonstration of the Central Limit Theorem:\nRegardless of the underlying distribution, the sampling distribution of the sample mean approaches normality as sample size increases.\nBy the time n = 1000, the distribution is sharply centered around the true treatment effect (0.004), confirming that larger samples reduce variability and improve the precision of statistical inference.\nAlso, when sample size ( n &gt; 30 ), the sampling distribution of the mean is typically close enough to normal for t-tests and confidence intervals to be reliable."
  },
  {
    "objectID": "projects/project2/hw1_code.html",
    "href": "projects/project2/hw1_code.html",
    "title": "Balance Test",
    "section": "",
    "text": "import pandas as pd\n\n# Load the Stata dataset\ndf = pd.read_stata(\"karlan_list_2007.dta\")\n\n# Display basic information and the first few rows\ndf.head()\n\n\n\n\n\n\n\n\ntreatment\ncontrol\nratio\nratio2\nratio3\nsize\nsize25\nsize50\nsize100\nsizeno\n...\nredcty\nbluecty\npwhite\npblack\npage18_39\nave_hh_sz\nmedian_hhincome\npowner\npsch_atlstba\npop_propurban\n\n\n\n\n0\n0\n1\nControl\n0\n0\nControl\n0\n0\n0\n0\n...\n0.0\n1.0\n0.446493\n0.527769\n0.317591\n2.10\n28517.0\n0.499807\n0.324528\n1.0\n\n\n1\n0\n1\nControl\n0\n0\nControl\n0\n0\n0\n0\n...\n1.0\n0.0\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\nNaN\n\n\n2\n1\n0\n1\n0\n0\n$100,000\n0\n0\n1\n0\n...\n0.0\n1.0\n0.935706\n0.011948\n0.276128\n2.48\n51175.0\n0.721941\n0.192668\n1.0\n\n\n3\n1\n0\n1\n0\n0\nUnstated\n0\n0\n0\n1\n...\n1.0\n0.0\n0.888331\n0.010760\n0.279412\n2.65\n79269.0\n0.920431\n0.412142\n1.0\n\n\n4\n1\n0\n1\n0\n0\n$50,000\n0\n1\n0\n0\n...\n0.0\n1.0\n0.759014\n0.127421\n0.442389\n1.85\n40908.0\n0.416072\n0.439965\n1.0\n\n\n\n\n5 rows × 51 columns\nfrom scipy import stats\nimport statsmodels.api as sm\nimport statsmodels.formula.api as smf\n\n# Drop rows with missing values in mrm2 and treatment\ndf_clean = df[['treatment', 'mrm2', 'years', 'freq', 'female']].dropna()\n\n# T-test: compare mrm2 (months since last donation) between treatment and control groups\ntreat_group = df_clean[df_clean['treatment'] == 1]['mrm2']\ncontrol_group = df_clean[df_clean['treatment'] == 0]['mrm2']\nt_stat, p_val = stats.ttest_ind(treat_group, control_group)\n\n# Linear regression: regress mrm2 on treatment\nreg_model = smf.ols('mrm2 ~ treatment', data=df_clean).fit()\nreg_summary = reg_model.summary()\n\n# Collect means and stds for reporting\nmeans = df_clean.groupby('treatment')['mrm2'].agg(['mean', 'std', 'count'])\n\n(t_stat, p_val)\n\n(0.0764041463527638, 0.9390978830677066)\nmeans\n\n\n\n\n\n\n\n\nmean\nstd\ncount\n\n\ntreatment\n\n\n\n\n\n\n\n0\n12.984577\n12.065892\n16339\n\n\n1\n12.993411\n12.064867\n32632\nreg_summary\n\n\nOLS Regression Results\n\n\nDep. Variable:\nmrm2\nR-squared:\n0.000\n\n\nModel:\nOLS\nAdj. R-squared:\n-0.000\n\n\nMethod:\nLeast Squares\nF-statistic:\n0.005838\n\n\nDate:\nWed, 23 Apr 2025\nProb (F-statistic):\n0.939\n\n\nTime:\n13:20:23\nLog-Likelihood:\n-1.9144e+05\n\n\nNo. Observations:\n48971\nAIC:\n3.829e+05\n\n\nDf Residuals:\n48969\nBIC:\n3.829e+05\n\n\nDf Model:\n1\n\n\n\n\nCovariance Type:\nnonrobust\n\n\n\n\n\n\n\n\n\n\n\ncoef\nstd err\nt\nP&gt;|t|\n[0.025\n0.975]\n\n\nIntercept\n12.9846\n0.094\n137.564\n0.000\n12.800\n13.170\n\n\ntreatment\n0.0088\n0.116\n0.076\n0.939\n-0.218\n0.235\n\n\n\n\n\n\n\n\nOmnibus:\n7823.434\nDurbin-Watson:\n2.000\n\n\nProb(Omnibus):\n0.000\nJarque-Bera (JB):\n12126.494\n\n\nSkew:\n1.161\nProb(JB):\n0.00\n\n\nKurtosis:\n3.741\nCond. No.\n3.22\n\n\n\nNotes:[1] Standard Errors assume that the covariance matrix of the errors is correctly specified."
  },
  {
    "objectID": "projects/project2/hw1_code.html#charitable-contribution-made",
    "href": "projects/project2/hw1_code.html#charitable-contribution-made",
    "title": "Balance Test",
    "section": "Charitable Contribution Made",
    "text": "Charitable Contribution Made\nFirst, I analyze whether matched donations lead to an increased response rate of making a donation.\ntodo: make a barplot with two bars. Each bar is the proportion of people who donated. One bar for treatment and one bar for control.\n\n# Reload libraries in case of session reset\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom scipy import stats\nimport statsmodels.formula.api as smf\n\n\n# Step 1: Clean data for this analysis\ndf_contribution = df[['treatment', 'gave']].dropna()\n\n# Step 2: Compute donation rates\ndonation_rates = df_contribution.groupby('treatment')['gave'].mean().reset_index()\ndonation_rates['treatment'] = donation_rates['treatment'].map({0: 'Control', 1: 'Treatment'})\n\n# Step 3: Bar plot\nplt.figure(figsize=(6, 4))\nsns.barplot(x='treatment', y='gave', data=donation_rates)\nplt.title('Proportion of People Who Donated')\nplt.ylabel('Donation Rate')\nplt.xlabel('Group')\nplt.ylim(0, 0.03)\nplt.tight_layout()\nplt.show()\n\n\n\n\n\n\n\n\n\nThe bar plot shows a higher donation rate in the treatment group.\n\ndonation_rates\n\n\n\n\n\n\n\n\ntreatment\ngave\n\n\n\n\n0\nControl\n0.017858\n\n\n1\nTreatment\n0.022039\n\n\n\n\n\n\n\n\ncontrol_group = df_contribution[df_contribution['treatment'] == 0]['gave']\ntreatment_group = df_contribution[df_contribution['treatment'] == 1]['gave']\nt_stat, p_val = stats.ttest_ind(treatment_group, control_group)\nt_stat, p_val\n\n(3.1013610005439456, 0.0019274025949016982)\n\n\n\n\nA t-test confirms that this difference is statistically significant (p = 0.0019). Linear regression estimates that receiving the match offer increases donation likelihood by 0.42 percentage points.\n\nols_model = smf.ols('gave ~ treatment', data=df_contribution).fit()\nols_model.summary()\n\n\nOLS Regression Results\n\n\nDep. Variable:\ngave\nR-squared:\n0.000\n\n\nModel:\nOLS\nAdj. R-squared:\n0.000\n\n\nMethod:\nLeast Squares\nF-statistic:\n9.618\n\n\nDate:\nWed, 23 Apr 2025\nProb (F-statistic):\n0.00193\n\n\nTime:\n13:20:25\nLog-Likelihood:\n26630.\n\n\nNo. Observations:\n50083\nAIC:\n-5.326e+04\n\n\nDf Residuals:\n50081\nBIC:\n-5.324e+04\n\n\nDf Model:\n1\n\n\n\n\nCovariance Type:\nnonrobust\n\n\n\n\n\n\n\n\n\n\n\ncoef\nstd err\nt\nP&gt;|t|\n[0.025\n0.975]\n\n\nIntercept\n0.0179\n0.001\n16.225\n0.000\n0.016\n0.020\n\n\ntreatment\n0.0042\n0.001\n3.101\n0.002\n0.002\n0.007\n\n\n\n\n\n\n\n\nOmnibus:\n59814.280\nDurbin-Watson:\n2.005\n\n\nProb(Omnibus):\n0.000\nJarque-Bera (JB):\n4317152.727\n\n\nSkew:\n6.740\nProb(JB):\n0.00\n\n\nKurtosis:\n46.440\nCond. No.\n3.23\n\n\n\nNotes:[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.\n\n\n\n\nUnderstanding the OLS Regression Output\nThe OLS regression estimates the following model:\ngave ~ treatment\nWhere: - gave is a binary variable indicating whether someone donated (1 = yes, 0 = no) - treatment is 1 if the individual received a matching donation offer, and 0 otherwise\nIn this model: - The intercept represents the average donation rate in the control group - The coefficient on treatment represents the difference in donation rates between the treatment and control groups\nFrom our regression: - Intercept = 0.0179 → This matches the donation rate in the control group: 1.79% - Treatment coefficient = 0.0042 → This means the treatment group donated 0.42 percentage points more than the control group\nThese numbers exactly match our earlier manual calculations: - Control group donation rate: 0.017858 - Treatment group donation rate: 0.022039 - Difference: 0.004181\nThus, the OLS regression provides an alternative but equivalent way of estimating the average treatment effect (ATE) in this binary outcome context.\n\nprobit_model = smf.probit('gave ~ treatment', data=df_contribution).fit()\nprobit_model.summary()\n\nOptimization terminated successfully.\n         Current function value: 0.100443\n         Iterations 7\n\n\n\nProbit Regression Results\n\n\nDep. Variable:\ngave\nNo. Observations:\n50083\n\n\nModel:\nProbit\nDf Residuals:\n50081\n\n\nMethod:\nMLE\nDf Model:\n1\n\n\nDate:\nWed, 23 Apr 2025\nPseudo R-squ.:\n0.0009783\n\n\nTime:\n13:20:25\nLog-Likelihood:\n-5030.5\n\n\nconverged:\nTrue\nLL-Null:\n-5035.4\n\n\nCovariance Type:\nnonrobust\nLLR p-value:\n0.001696\n\n\n\n\n\n\n\n\n\ncoef\nstd err\nz\nP&gt;|z|\n[0.025\n0.975]\n\n\nIntercept\n-2.1001\n0.023\n-90.073\n0.000\n-2.146\n-2.054\n\n\ntreatment\n0.0868\n0.028\n3.113\n0.002\n0.032\n0.141\n\n\n\n\n\n\n\nThe probit regression confirms that assignment to the match treatment significantly increased the probability of donating. The coefficient on treatment is positive (0.0868) and statistically significant (p = 0.002), suggesting that matching appeals have a real behavioral impact on charitable decisions."
  },
  {
    "objectID": "projects/project2/hw1_code.html#differences-between-match-rates",
    "href": "projects/project2/hw1_code.html#differences-between-match-rates",
    "title": "Balance Test",
    "section": "Differences between Match Rates",
    "text": "Differences between Match Rates\n\nIn this section, I examine whether higher match ratios (2:1 or 3:1) lead to a higher probability of donation compared to the baseline 1:1 match.\n\n# group 1 2 3\ndf['ratio'] = df['ratio'].astype(str)\ndf_match = df[(df['treatment'] == 1) & (df['ratio'].isin(['1', '2', '3']))].copy()\n\ndf_match['ratio1'] = (df_match['ratio'] == '1').astype(int)\ndf_match['ratio2'] = (df_match['ratio'] == '2').astype(int)\ndf_match['ratio3'] = (df_match['ratio'] == '3').astype(int)\n\n# Run t-tests comparing donation rates between different ratios\nrate_1 = df_match[df_match['ratio1'] == 1]['gave']\nrate_2 = df_match[df_match['ratio2'] == 1]['gave']\nrate_3 = df_match[df_match['ratio3'] == 1]['gave']\n\nt_12 = stats.ttest_ind(rate_2, rate_1)\nt_23 = stats.ttest_ind(rate_3, rate_2)\nt_12, t_23\n\n(Ttest_indResult(statistic=0.96504713432247, pvalue=0.33453168549723933),\n Ttest_indResult(statistic=0.05011583793874515, pvalue=0.9600305283739325))\n\n\nWe conduct two-sample t-tests to compare the response rates across different match ratios:\n\n2:1 vs 1:1\n\nt = 0.965, p = 0.334 → not statistically significant\n\n3:1 vs 2:1\n\nt = 0.050, p = 0.960 → not statistically significant\n\n\nThese tests suggest that while donation rates rise slightly with higher match ratios, the differences are not statistically meaningful.\n\n# Step 5: Compute donation rate means for each ratio\ndonation_means = df_match.groupby('ratio')['gave'].mean()\ndonation_means\n\nratio\n1    0.020749\n2    0.022633\n3    0.022733\nName: gave, dtype: float64\n\n\n\n\nThe donation rate increases slightly as the match ratio increases. However, these differences are relatively small in magnitude.\n\nreg_model_categorical = smf.ols('gave ~ C(ratio)', data=df_match).fit()\nreg_model_categorical.summary()\n\n\nOLS Regression Results\n\n\nDep. Variable:\ngave\nR-squared:\n0.000\n\n\nModel:\nOLS\nAdj. R-squared:\n-0.000\n\n\nMethod:\nLeast Squares\nF-statistic:\n0.6454\n\n\nDate:\nWed, 23 Apr 2025\nProb (F-statistic):\n0.524\n\n\nTime:\n13:20:25\nLog-Likelihood:\n16688.\n\n\nNo. Observations:\n33396\nAIC:\n-3.337e+04\n\n\nDf Residuals:\n33393\nBIC:\n-3.334e+04\n\n\nDf Model:\n2\n\n\n\n\nCovariance Type:\nnonrobust\n\n\n\n\n\n\n\n\n\n\n\ncoef\nstd err\nt\nP&gt;|t|\n[0.025\n0.975]\n\n\nIntercept\n0.0207\n0.001\n14.912\n0.000\n0.018\n0.023\n\n\nC(ratio)[T.2]\n0.0019\n0.002\n0.958\n0.338\n-0.002\n0.006\n\n\nC(ratio)[T.3]\n0.0020\n0.002\n1.008\n0.313\n-0.002\n0.006\n\n\n\n\n\n\n\n\nOmnibus:\n38963.957\nDurbin-Watson:\n1.995\n\n\nProb(Omnibus):\n0.000\nJarque-Bera (JB):\n2506478.937\n\n\nSkew:\n6.511\nProb(JB):\n0.00\n\n\nKurtosis:\n43.394\nCond. No.\n3.73\n\n\n\nNotes:[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.\n\n\n\n\nNone of the differences are statistically significant at the 5% level. This further supports the conclusion that larger match ratios do not significantly improve the likelihood of donating."
  }
]